<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0cse5q1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.35.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.21.0">
  <bpmn:collaboration id="Collaboration_04ivwe3">
    <bpmn:participant id="delivery_process_participan" name="Обработка доставки" processRef="delivery_process_process" />
  </bpmn:collaboration>
  <bpmn:process id="delivery_process_process" name="DeliveryProcess" isExecutable="true" camunda:historyTimeToLive="30">
    <bpmn:startEvent id="StartEvent_1" name="Старт обработки доставки" camunda:formRef="Form_0dlu2mf" camunda:formRefBinding="latest">
      <bpmn:outgoing>Flow_17mz6h7</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_0j8k5yr" name="Проверить корректность заказа" camunda:delegateExpression="${validateDeliveryBeforeDeliveryProcessDelegate}">
      <bpmn:incoming>Flow_17mz6h7</bpmn:incoming>
      <bpmn:outgoing>Flow_029z7ej</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0p20dwn" name="Заказ провалидирован?">
      <bpmn:incoming>Flow_029z7ej</bpmn:incoming>
      <bpmn:outgoing>Flow_06cbd0m</bpmn:outgoing>
      <bpmn:outgoing>Flow_0lgw9sn</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_0lgzn73" name="Сообщение об ошибке заказа" camunda:formRef="Form_1cf56mp" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_0lgw9sn</bpmn:incoming>
      <bpmn:outgoing>Flow_1mj7ug2</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="Event_0ti17jo" name="Отмена обработки доставки">
      <bpmn:incoming>Flow_1mj7ug2</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="Activity_0m0rgtf" name="Обновление статуса достаки" camunda:formRef="Form_0oxb5ij" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_06cbd0m</bpmn:incoming>
      <bpmn:incoming>Flow_1vljm4h</bpmn:incoming>
      <bpmn:outgoing>Flow_0do19pz</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_07ntqc4" name="Заказ доставлен?">
      <bpmn:incoming>Flow_13ndjz5</bpmn:incoming>
      <bpmn:outgoing>Flow_1vljm4h</bpmn:outgoing>
      <bpmn:outgoing>Flow_0wyao5g</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_0cuq8hg" name="Обновление статуса достаки" camunda:delegateExpression="${updateDeliveryStatusDelegate}">
      <bpmn:incoming>Flow_0do19pz</bpmn:incoming>
      <bpmn:outgoing>Flow_13ndjz5</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_018quhi">
        <bpmn:targetRef>DataStoreReference_1fw2gdm</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1fw2gdm" />
    <bpmn:userTask id="Activity_1rorpbd" name="Информация о доставленном заказе" camunda:formRef="Form_026bf0v" camunda:formRefBinding="latest">
      <bpmn:incoming>Flow_0wyao5g</bpmn:incoming>
      <bpmn:outgoing>Flow_1mdaphu</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="Event_1qerqk9" name="Заказ доставлен">
      <bpmn:incoming>Flow_1mdaphu</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_17mz6h7" sourceRef="StartEvent_1" targetRef="Activity_0j8k5yr" />
    <bpmn:sequenceFlow id="Flow_029z7ej" sourceRef="Activity_0j8k5yr" targetRef="Gateway_0p20dwn" />
    <bpmn:sequenceFlow id="Flow_06cbd0m" name="да" sourceRef="Gateway_0p20dwn" targetRef="Activity_0m0rgtf">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isOk}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0lgw9sn" name="нет" sourceRef="Gateway_0p20dwn" targetRef="Activity_0lgzn73">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!isOk}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1mj7ug2" sourceRef="Activity_0lgzn73" targetRef="Event_0ti17jo" />
    <bpmn:sequenceFlow id="Flow_1vljm4h" name="нет" sourceRef="Gateway_07ntqc4" targetRef="Activity_0m0rgtf">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!isShipped}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0do19pz" sourceRef="Activity_0m0rgtf" targetRef="Activity_0cuq8hg" />
    <bpmn:sequenceFlow id="Flow_13ndjz5" sourceRef="Activity_0cuq8hg" targetRef="Gateway_07ntqc4" />
    <bpmn:sequenceFlow id="Flow_0wyao5g" name="да" sourceRef="Gateway_07ntqc4" targetRef="Activity_1rorpbd">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isShipped}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1mdaphu" sourceRef="Activity_1rorpbd" targetRef="Event_1qerqk9" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_04ivwe3">
      <bpmndi:BPMNShape id="Participant_0rjqsrl_di" bpmnElement="delivery_process_participan" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1090" height="360" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="232" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="207" y="255" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0k7hvkl_di" bpmnElement="Activity_0j8k5yr">
        <dc:Bounds x="340" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0p20dwn_di" bpmnElement="Gateway_0p20dwn" isMarkerVisible="true">
        <dc:Bounds x="495" y="205" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="477" y="160" width="86" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_05stosm_di" bpmnElement="Activity_0lgzn73">
        <dc:Bounds x="470" y="310" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ti17jo_di" bpmnElement="Event_0ti17jo">
        <dc:Bounds x="622" y="332" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="614" y="375" width="53" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rdxznw_di" bpmnElement="Activity_0m0rgtf">
        <dc:Bounds x="620" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_07ntqc4_di" bpmnElement="Gateway_07ntqc4" isMarkerVisible="true">
        <dc:Bounds x="925" y="205" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="920" y="262" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1141zg8_di" bpmnElement="Activity_0cuq8hg">
        <dc:Bounds x="770" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1fw2gdm_di" bpmnElement="DataStoreReference_1fw2gdm">
        <dc:Bounds x="795" y="295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0g3mpu4_di" bpmnElement="Activity_1rorpbd">
        <dc:Bounds x="1020" y="190" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1qerqk9_di" bpmnElement="Event_1qerqk9">
        <dc:Bounds x="1172" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1147" y="255" width="86" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_17mz6h7_di" bpmnElement="Flow_17mz6h7">
        <di:waypoint x="268" y="230" />
        <di:waypoint x="340" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_029z7ej_di" bpmnElement="Flow_029z7ej">
        <di:waypoint x="440" y="230" />
        <di:waypoint x="495" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06cbd0m_di" bpmnElement="Flow_06cbd0m">
        <di:waypoint x="545" y="230" />
        <di:waypoint x="620" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="576" y="212" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0lgw9sn_di" bpmnElement="Flow_0lgw9sn">
        <di:waypoint x="520" y="255" />
        <di:waypoint x="520" y="310" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="527" y="257" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mj7ug2_di" bpmnElement="Flow_1mj7ug2">
        <di:waypoint x="570" y="350" />
        <di:waypoint x="622" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vljm4h_di" bpmnElement="Flow_1vljm4h">
        <di:waypoint x="950" y="205" />
        <di:waypoint x="950" y="140" />
        <di:waypoint x="670" y="140" />
        <di:waypoint x="670" y="190" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="961" y="173" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0do19pz_di" bpmnElement="Flow_0do19pz">
        <di:waypoint x="720" y="230" />
        <di:waypoint x="770" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13ndjz5_di" bpmnElement="Flow_13ndjz5">
        <di:waypoint x="870" y="230" />
        <di:waypoint x="925" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wyao5g_di" bpmnElement="Flow_0wyao5g">
        <di:waypoint x="975" y="230" />
        <di:waypoint x="1020" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="983" y="212" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mdaphu_di" bpmnElement="Flow_1mdaphu">
        <di:waypoint x="1120" y="230" />
        <di:waypoint x="1172" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_018quhi_di" bpmnElement="DataOutputAssociation_018quhi">
        <di:waypoint x="820" y="270" />
        <di:waypoint x="820" y="295" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
